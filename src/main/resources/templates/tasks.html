<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/static/png/diary.png" type="image/png" sizes="32x32">
    <title th:text="'–ó–∞–¥–∞—á–∏ –Ω–∞ ' + ${currentDate}">–ó–∞–¥–∞—á–∏</title>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    <style>
        #currentDate{
        font-size: 4.5 rem;
        }

        #task-stats .stat-item {
            background-color: #f8f9fa; /* —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω –¥–ª—è –±–ª–æ–∫–∞ */
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        #task-stats .stat-item:hover {
            transform: scale(1.05);
        }

        #task-stats .stat-text {
            margin-left: 10px;
            font-size: 23px;
            font-weight: bold;
        }

        #task-stats .bi {
            font-size: 24px;
            color: #007bff; /* —Å–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è –∏–∫–æ–Ω–æ–∫ */
        }

        /* –û—Ç–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∫–æ–Ω–∫–∏ */
        #task-stats .col-4 {
            margin-bottom: 10px;
        }

        #last_btn{
        margin-bottom:30px;
        }

    </style>
</head>
<body>
<div class="container mt-5">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π -->
    <h1 id="currentDate" th:text="'–ó–∞–¥–∞—á–∏ –Ω–∞ ' + ${currentDate}" th:attr="data-current-date=${currentDate}" class="text-center mb-4"></h1>

    <div class="row mb-4">
        <!-- –í—Ä–µ–º—è –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç -->
        <div class="col-12">
            <h2 id="current-time" class="text-center"></h2>
        </div>
    </div>

    <!-- –°—Å—ã–ª–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <div class="d-flex justify-content-between mb-4">
        <a href="/tasks/new" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</a>
        <a th:href="@{/tasks/calendar/{yearMonth}(yearMonth=${yearMonth})}" class="btn btn-secondary">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞—á -->
    <div id="task-stats" class="row mb-4">
        <div class="col-4">
            <div class="stat-item">
                <i class="bi bi-check-all"></i>
                <p class="stat-text">–í—Å–µ–≥–æ –∑–∞–¥–∞—á: <span id="totalTasks">0</span></p>
            </div>
        </div>
        <div class="col-4">
            <div class="stat-item">
                <i class="bi bi-check-circle"></i>
                <p class="stat-text">–í—ã–ø–æ–ª–Ω–µ–Ω–æ: <span id="completedTasks">0</span></p>
            </div>
        </div>
        <div class="col-4">
            <div class="stat-item">
                <i class="bi bi-circle"></i>
                <p class="stat-text">–ù–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å: <span id="uncompletedTasks">0</span></p>
            </div>
        </div>
    </div>



    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
    <div class="mb-4">
        <p>–ó–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞–¥–∞—á: <span id="completionPercentage">0</span>%</p>
        <progress id="progressBar" value="0" max="100" class="w-100"></progress>
    </div>

    <!-- –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
    <div class="alert alert-info" id="motivationMessage">–ù–µ —Ç–µ—Ä—è–π –≤—Ä–µ–º—è, –¥–∞–≤–∞–π –Ω–∞—á–Ω–∏ —Å —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á! ‚è≥üòÖ</div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–¥–∞—á -->
    <div th:if="${tasks.isEmpty()}">
        <p class="text-center">–ù–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç –∑–∞–¥–∞—á.</p>
    </div>

    <div th:if="${!tasks.isEmpty()}">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
            </thead>
            <tbody>
            <!-- –ü–µ—Ä–µ–±–æ—Ä –∑–∞–¥–∞—á -->
            <tr th:each="task : ${tasks}">
                <td th:text="${task.title}">–ó–∞–≥–æ–ª–æ–≤–æ–∫</td>
                <td th:text="${task.content}">–û–ø–∏—Å–∞–Ω–∏–µ</td>
                <td th:text="${task.startTime + ' - ' + task.endTime}">–í—Ä–µ–º—è</td>
                <td>
                    <div class="form-check">
                        <input type="checkbox"
                               th:checked="${task.completed}"
                               th:attr="data-task-id=${task.id}, data-completed=${task.completed}"
                               class="form-check-input task-checkbox">
                        <label class="form-check-label">–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</label>
                    </div>
                </td>
                <td>
                    <form th:action="@{/tasks/delete/{id}(id=${task.id})}" method="get" class="d-inline-block">
                        <button type="submit" class="btn btn-danger btn-sm">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                    <a th:href="@{/tasks/edit/{id}(id=${task.id})}" class="btn btn-warning btn-sm">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- –°—Å—ã–ª–∫–∞ –Ω–∞–∑–∞–¥ –∫ –¥–Ω–µ–≤–Ω–∏–∫—É -->
    <a href="/diary" id="last_btn" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ –¥–Ω–µ–≤–Ω–∏–∫—É</a>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
<script src="/static/js/completed.js"></script>
<script src="/static/js/statisticsForTask.js"></script>
<script src="/static/js/updateClockTask.js"></script>


<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
